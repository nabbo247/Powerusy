@model PowerusyData.LoginViewModel
@using PagedList.Mvc;
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Customer Registration Start -->
@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <!-- BEGIN HIDDEN FIELDS AREA -->
    @Html.HiddenFor(m => m.EventCommand)
    @Html.HiddenFor(m => m.Mode)
    @Html.HiddenFor(m => m.EventArgument)
    <!-- END HIDDEN FIELDS AREA -->
    <!--start Loading panel-->

    <!-- Breadcroumbs start -->
    <div class="wshipping-content-block wshipping-breadcroumb inner-bg-1">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-7">
                    <h1>Customer Login</h1>
                    <a href="index.html" title="Home">Home</a> / Customer Login
                </div>
                <div class="col-12 col-lg-5 text-right">
                    <h4>
                        We freight to all over the world
                        The best logistic company, <span>FAST</span> and <span>SAFELY!</span>
                    </h4>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcroumbs end -->

    <!-- Customer login Start -->
    <div class="wshipping-content-block">
        <div class="container">
            <div class="customer-login">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-6">
                        <div class="customer-login-left">
                            <div class="login-icon"><i class="fa fa-lock"></i></div>
                            <h4>Welcome To your account</h4>
                            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                            <a href="#">Create A new Account</a>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-6">
                        <div class="customer-login-block">
                            <div class="row">
                                <div class="col-12 col-md-12 col-lg-12">
                                    @if (!Model.IsValid)
                                    {
                                        <div class="alert alert-danger
                    alert-dismissable"
                                             role="alert">
                                            <button type="button" class="close"
                                                    data-dismiss="alert">
                                                <span aria-hidden="true">
                                                    &times;
                                                </span>
                                                <span class="sr-only">Close</span>
                                            </button>
                                            @Html.ValidationSummary(false)
                                        </div>
                                    }
                                    @if (TempData["Msg"] != null)
                                    {
                                        <div class="alert alert-dismissable alert-success">
                                            <button type="button" class="close" data-dismiss="alert">
                                                x
                                            </button>
                                            @TempData["Msg"].ToString()
                                        </div>
                                    }
                                </div>
                            </div>
                            <h2>Login To Your Account</h2>
                            <form action="index.html">
                                <div class="form-group">
                                    <label>Email address:</label>
                                    @Html.TextBoxFor(m => m.Entity.username, new { @class = "form-control" })
                                </div>
                                <div class="form-group">
                                    <label>Password:</label>
                                    @Html.PasswordFor(m => m.Entity.Password, new { @class = "form-control" })
                                </div>
                                <div class="checkbox">
                                    <input type="checkbox" name="remember" id="remember" class="css-checkbox" />
                                    <label for="remember" class="css-label">Remember me</label>
                                    <a href="#" title="" class="forgot-pass">Forgot your password?</a>
                                </div>
                                <button type="submit" class="btn btn-submit">Login</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Customer login end -->
}
@section scripts {
    <script>
        $(document).ready(function () {
            $(document).ajaxStart(function () {
                $("#loading").show();
            });
            $(document).ajaxStop(function () {
                $("#loading").hide();
            });

            $("[data-pdsa-action]").on("click", function (e) {
                $("#loading").show();
                e.preventDefault();
                $("#EventCommand").val($(this).data("pdsa-action"));
                $("#EventArgument").val($(this).attr("data-pdsa-val"));
                $("form").submit();
                $.ajax({
                    type: frm.attr('method'),
                    url: frm.attr('action'),
                    data: frm.serialize(),
                    success: function (data) {
                        console.log('Submission was successful.');
                        console.log(data);
                    },
                    error: function (data) {
                        console.log('An error occurred.');
                        console.log(data);
                    },
                });
                $("#loading").hide();
            });
        });
    </script>
}
